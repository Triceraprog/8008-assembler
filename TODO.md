- Macro system
  - Replace arguments
    - Verify at call site that the number of arguments matches the number of parameters.
    - Create a dictionary of replacement
    - ... Check when recording that the parameters all have different names
    - When doing an append_line, if there's a replacement directory, replace.
  - Use the FileReader callback to pop the macro local context.
  - Add a comment in the listing when doing a macro expansion
- Simplify file declaration in functional tests (based on a naming scheme)
- The responsibility of the short format should probably be in Listing
- Make a pass in the readability to the -debug option
- The listing can be reconstructed without keeping the initial line. Can it?
- Option to output an expended, simple assembly code with a syntax for another assembler, especially as8
- Check name of executable and if as8, enters a compatible mode if needed
- If the accumulator results in a negative number, various weird things happen, because it's passed as int (wrong hex, wrong lst)
- Support for priorities in expressions (with optional compatibilities with as8)
- Change the hardcoded path in functional tests to a parameter and generate the call to tests from CMake
- If the push/pop contexts have performance problems with copying the options, copy on write could be used.
